{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 391,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Populating the interactive namespace from numpy and matplotlib\n"
     ]
    }
   ],
   "source": [
    "############### Libraries\n",
    "%pylab inline\n",
    "import dataiku\n",
    "from dataiku import pandasutils as pdu\n",
    "import pandas as pd\n",
    "import numpy as np\n",
    "pd.set_option('mode.chained_assignment', None)\n",
    "#https://www.dataquest.io/blog/settingwithcopywarning/\n",
    "\n",
    "import datetime\n",
    "from datetime import timedelta\n",
    "import datetime\n",
    "import seaborn as sns\n",
    "import re as re\n",
    "import math\n",
    "import pickle\n",
    "import time\n",
    "import sys\n",
    "import datetime\n",
    "#print(sys.version)\n",
    "import scikitplot as skplt\n",
    "\n",
    "from matplotlib import pyplot as plt\n",
    "from math import log\n",
    "from datetime import datetime, timedelta\n",
    "from numpy import sort\n",
    "\n",
    "import scipy.stats as st\n",
    "import scipy.special as spec\n",
    "\n",
    "from sklearn.preprocessing import Imputer\n",
    "from sklearn.model_selection import train_test_split, StratifiedShuffleSplit,StratifiedKFold, RandomizedSearchCV, GridSearchCV\n",
    "from sklearn.metrics import accuracy_score, log_loss, roc_auc_score, precision_score, recall_score,confusion_matrix, roc_curve, classification_report\n",
    "from sklearn.neighbors import KNeighborsClassifier\n",
    "from sklearn.svm import SVC, LinearSVC, NuSVC\n",
    "from sklearn.tree import DecisionTreeClassifier\n",
    "from sklearn.ensemble import RandomForestClassifier, AdaBoostClassifier, GradientBoostingClassifier, RandomForestRegressor\n",
    "from sklearn.naive_bayes import GaussianNB\n",
    "from sklearn.discriminant_analysis import LinearDiscriminantAnalysis, QuadraticDiscriminantAnalysis\n",
    "from sklearn.linear_model import LogisticRegression\n",
    "from sklearn.feature_selection import SelectFromModel\n",
    "\n",
    "#import scikitplot as skplt\n",
    "\n",
    "from xgboost import XGBClassifier, plot_importance\n",
    "\n",
    "import lightgbm as lgb\n",
    "from lightgbm import LGBMClassifier\n",
    "\n",
    "import warnings\n",
    "warnings.filterwarnings(\"ignore\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 392,
   "metadata": {},
   "outputs": [],
   "source": [
    "############### My Functions\n",
    "def add_date(month_date, num):\n",
    "    \n",
    "    month = month_date%100\n",
    "    year = int(month_date/100)\n",
    "    \n",
    "    if month + num > 0 and month + num <=12:\n",
    "        new_month = month + num\n",
    "        new_year = year\n",
    "    elif month + num <= 0:\n",
    "        new_month = month + num + 12\n",
    "        new_year = year -1 \n",
    "    elif month + num > 12:\n",
    "        new_month = month + num - 12\n",
    "        new_year = year + 1\n",
    "    \n",
    "    return new_year*100+new_month\n",
    "\n",
    "def commas(num):\n",
    "    return '{0:,d}'.format(num)\n",
    "\n",
    "def bold(x):\n",
    "    return '\\033[1m' + x + '\\033[0m'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 658,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Dataiku execusion:  1 minutes\n",
      "Dataiku execusion:  0 minutes\n"
     ]
    }
   ],
   "source": [
    "#### vc_mdl_pwd_reset - all customers that reset their password\n",
    "#### vc_mdl_pwd_forced - force migration customers\n",
    "\n",
    "start = time.time()\n",
    "\n",
    "all_df = dataiku.Dataset(\"vc_mdl_pwd_reset\")\n",
    "all_df = all_df.get_dataframe()\n",
    "\n",
    "end = time.time()\n",
    "\n",
    "print(\"Dataiku execusion: \", int((end - start)/60), \"minutes\")\n",
    "\n",
    "####################################################################\n",
    "\n",
    "start = time.time()\n",
    "\n",
    "forced_df = dataiku.Dataset(\"vc_mdl_pwd_forced\")\n",
    "forced_df = forced_df.get_dataframe()\n",
    "\n",
    "end = time.time()\n",
    "\n",
    "print(\"Dataiku execusion: \", int((end - start)/60), \"minutes\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 886,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Possible responses:'call_ind', 'non_call_ind', 'non_call_one_week',\n",
    "#                       'non_call_two_weeks', 'non_call_month'\n",
    "\n",
    "response = 'non_call_ind'\n",
    "data = forced_df.copy()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 887,
   "metadata": {},
   "outputs": [],
   "source": [
    "#### only for all\n",
    "# data = data.loc[data['ocif_id'] != 23167001705700,]\n",
    "# data = data.drop('dep_date',1) "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 893,
   "metadata": {},
   "outputs": [],
   "source": [
    "#data.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 815,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Size is reduced from 370,362\n",
      "To 343,856\n"
     ]
    }
   ],
   "source": [
    "print('Size is reduced from', commas(data.shape[0]))\n",
    "data = data.loc[data['acct_cnt'].isnull() == False,]\n",
    "print('To', commas(data.shape[0]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 816,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "We have 306,327 unique customers, so we have to change the data to make it on customer level\n"
     ]
    }
   ],
   "source": [
    "print('We have', commas(data['ocif_id'].nunique()), 'unique customers, so we have to change the data to make it on customer level')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 817,
   "metadata": {},
   "outputs": [],
   "source": [
    "#data.dtypes"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 818,
   "metadata": {},
   "outputs": [],
   "source": [
    "variables_all = list(data)\n",
    "variables_ids = ['cad_accs_id', 'accs_id']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 819,
   "metadata": {},
   "outputs": [],
   "source": [
    "variables_to_drop = variables_ids + ['AGE']\n",
    "\n",
    "for variable in variables_to_drop:\n",
    "    data = data.drop(variable,1) "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 820,
   "metadata": {},
   "outputs": [],
   "source": [
    "variables_dates = data.select_dtypes(include = ['datetime64[ns]']).columns.tolist()\n",
    "variables_indicators = [i for i in variables_all if any([x in i for x in ['IND','ind']]) ]\n",
    "variables_counts = [i for i in variables_all if any([x in i for x in ['CNT','cnt','count']])]\n",
    "variables_balances = [i for i in variables_all if 'BAL' in i]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 821,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "{'AGE',\n",
       " 'CUST_SEGMENT_ID',\n",
       " 'TENURE_ID',\n",
       " 'accs_id',\n",
       " 'age_pers',\n",
       " 'cad_accs_id',\n",
       " 'days_before_call',\n",
       " 'gender_cd',\n",
       " 'mbl_logins',\n",
       " 'mbl_prc',\n",
       " 'mrtl_st_cd',\n",
       " 'num_calls',\n",
       " 'ocif_id',\n",
       " 'olb_logins',\n",
       " 'olb_prc',\n",
       " 'primary_platform',\n",
       " 'segm_fin',\n",
       " 'tnr_mth_nbr',\n",
       " 'total_logins'}"
      ]
     },
     "execution_count": 821,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "set(variables_all) - set(variables_dates) - set(variables_indicators) - set (variables_counts) - set(variables_balances)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 822,
   "metadata": {},
   "outputs": [],
   "source": [
    "data_1 = data.groupby(['ocif_id'])[variables_dates + variables_indicators].max()\n",
    "data_2 = data.groupby(['ocif_id'])[variables_counts + variables_balances ].sum()\n",
    "data_3 = data.groupby(['ocif_id'])['AGE','age_pers','mbl_prc','olb_prc'].mean()\n",
    "data_4 = data.groupby(['ocif_id'])['CUST_SEGMENT_ID', 'TENURE_ID', 'days_before_call',  'gender_cd', \n",
    "                                   'num_calls', 'mrtl_st_cd', 'primary_platform', 'segm_fin', 'tnr_mth_nbr'].max()\n",
    "data_5 = data.groupby(['ocif_id'])[ 'mbl_logins', 'olb_logins', 'total_logins'].sum()\n",
    "\n",
    "data_1 = data_1.reset_index()\n",
    "data_2 = data_2.reset_index()\n",
    "data_3 = data_3.reset_index()\n",
    "data_4 = data_4.reset_index()\n",
    "data_5 = data_5.reset_index()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 823,
   "metadata": {},
   "outputs": [],
   "source": [
    "data_merged = data_1.merge(data_2, on = 'ocif_id').merge(data_3, on = 'ocif_id').merge(data_4, on = 'ocif_id').merge(data_5, on = 'ocif_id')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 894,
   "metadata": {},
   "outputs": [],
   "source": [
    "#data_merged.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 825,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Check\n",
      "Number of rows is 306327 and number of unique customers is 306327\n"
     ]
    }
   ],
   "source": [
    "print('Check')\n",
    "print('Number of rows is', data_merged.shape[0], 'and number of unique customers is', data_merged['ocif_id'].nunique())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 826,
   "metadata": {},
   "outputs": [],
   "source": [
    "data = data_merged.copy()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 895,
   "metadata": {},
   "outputs": [],
   "source": [
    "#data.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 828,
   "metadata": {},
   "outputs": [],
   "source": [
    "variables_dates.remove('hist_data_dt')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 829,
   "metadata": {},
   "outputs": [],
   "source": [
    "################################ DATE VARIABLES ################################\n",
    "\n",
    "for variable in variables_dates:\n",
    "    new_variable = 'since_' + variable\n",
    "    data[new_variable] = (data['hist_data_dt'] - data[variable]).astype('timedelta64[D]') + 1\n",
    "    data = data.drop(variable,1) "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 896,
   "metadata": {},
   "outputs": [],
   "source": [
    "#data.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 831,
   "metadata": {},
   "outputs": [],
   "source": [
    "variables_to_drop =  ['since_event_date', 'since_mdl_run_dt', 'since_min_call_date', 'hist_data_dt', 'num_calls']\n",
    "\n",
    "for variable in variables_to_drop:\n",
    "    data = data.drop(variable,1) "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 832,
   "metadata": {},
   "outputs": [],
   "source": [
    "data.loc[data['call_ind'] == 1,'non_call_ind'] = 0\n",
    "data.loc[data['call_ind'] == 0,'non_call_ind'] = 1\n",
    "\n",
    "data.loc[data['days_before_call'].isnull() == True,'non_call_one_week'] = 1\n",
    "data.loc[data['days_before_call'] > 7,'non_call_one_week'] = 1\n",
    "data.loc[data['days_before_call'] <= 7,'non_call_one_week'] = 0\n",
    "\n",
    "data.loc[data['days_before_call'].isnull() == True,'non_call_two_weeks'] = 1\n",
    "data.loc[data['days_before_call'] > 14,'non_call_two_weeks'] = 1\n",
    "data.loc[data['days_before_call'] <= 14,'non_call_two_weeks'] = 0\n",
    "\n",
    "data.loc[data['days_before_call'].isnull() == True,'non_call_month'] = 1\n",
    "data.loc[data['days_before_call'] > 31,'non_call_month'] = 1\n",
    "data.loc[data['days_before_call'] <= 31,'non_call_month'] = 0"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 833,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "----------------------------\n",
      "\u001b[1mNever Called\u001b[0m \n",
      "\n",
      "non_call_ind\n",
      "0.0     52805\n",
      "1.0    253522\n",
      "Name: ocif_id, dtype: int64 \n",
      "----------------------------\n",
      "\u001b[1mDid not call in One Week\u001b[0m \n",
      "\n",
      "non_call_one_week\n",
      "0.0      7945\n",
      "1.0    298382\n",
      "Name: ocif_id, dtype: int64 \n",
      "----------------------------\n",
      "\u001b[1mDid not call in Two Weeks\u001b[0m \n",
      "\n",
      "non_call_two_weeks\n",
      "0.0     12355\n",
      "1.0    293972\n",
      "Name: ocif_id, dtype: int64 \n",
      "----------------------------\n",
      "\u001b[1mDid not call in One Month\u001b[0m \n",
      "\n",
      "non_call_month\n",
      "0.0     21841\n",
      "1.0    284486\n",
      "Name: ocif_id, dtype: int64\n",
      "----------------------------\n"
     ]
    }
   ],
   "source": [
    "print('----------------------------')\n",
    "print(bold('Never Called'),'\\n')\n",
    "print(data.groupby(['non_call_ind']).count()['ocif_id'],'\\n----------------------------')\n",
    "print(bold('Did not call in One Week'),'\\n')\n",
    "print(data.groupby(['non_call_one_week']).count()['ocif_id'],'\\n----------------------------')\n",
    "print(bold('Did not call in Two Weeks'),'\\n')\n",
    "print(data.groupby(['non_call_two_weeks']).count()['ocif_id'],'\\n----------------------------')\n",
    "print(bold('Did not call in One Month'),'\\n')\n",
    "print(data.groupby(['non_call_month']).count()['ocif_id'])\n",
    "print('----------------------------')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 834,
   "metadata": {},
   "outputs": [],
   "source": [
    "response_variables = ['call_ind', 'non_call_ind', 'non_call_one_week', 'non_call_two_weeks', 'non_call_month','days_before_call']\n",
    "\n",
    "response_variables.remove(response)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 835,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "['call_ind',\n",
       " 'non_call_one_week',\n",
       " 'non_call_two_weeks',\n",
       " 'non_call_month',\n",
       " 'days_before_call']"
      ]
     },
     "execution_count": 835,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "response_variables"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 836,
   "metadata": {},
   "outputs": [],
   "source": [
    "variables_to_drop = response_variables \n",
    "\n",
    "for variable in variables_to_drop:\n",
    "    data = data.drop(variable,1) "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 897,
   "metadata": {},
   "outputs": [],
   "source": [
    "#data.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 838,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "['since_MAX_OLB_MBL_CUST_DT',\n",
       " 'since_last_olb_login_dt',\n",
       " 'since_last_mbl_login_dt']"
      ]
     },
     "execution_count": 838,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#dates with NAs!\n",
    "['since_LAST_PAC_DT', 'since_LAST_PAD_DT']\n",
    "['since_MAX_OLB_MBL_CUST_DT', 'since_last_olb_login_dt', 'since_last_mbl_login_dt']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 884,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "variable = 'age_pers'# 1000 'since_last_olb_login_dt':90 # 'since_last_mbl_login_dt':90 #since_MAX_OLB_MBL_CUST_DT:1000\n",
    "\n",
    "target = data.loc[ (data[response] == 1) & (data[variable].isnull() == False ),variable]\n",
    "nontarget=  data.loc[ (data[response] == 0) & (data[variable].isnull() == False),variable]\n",
    "\n",
    "kwargs = dict(histtype='stepfilled', alpha=0.3, normed=True, bins=10)\n",
    "plt.hist(target, label = 'Target', **kwargs)\n",
    "plt.hist(nontarget, label = 'Non Target', **kwargs)\n",
    "plt.legend();"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 840,
   "metadata": {},
   "outputs": [],
   "source": [
    "#Fix NA for max(sort of) value\n",
    "\n",
    "variables_90 = ['since_last_olb_login_dt','since_last_mbl_login_dt']\n",
    "variables_1000 = ['since_MAX_OLB_MBL_CUST_DT', 'since_LAST_PAC_DT', 'since_LAST_PAD_DT']\n",
    "\n",
    "for variable in variables_90:\n",
    "    data.loc[(data[variable] > 90) | \n",
    "             (data[variable].isnull() == True ),variable] = 90\n",
    "    \n",
    "for variable in variables_1000:\n",
    "    data.loc[(data[variable] > 1000) | \n",
    "             (data[variable].isnull() == True ),variable] = 1000"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 898,
   "metadata": {},
   "outputs": [],
   "source": [
    "#data.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 842,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "SAV_TOT_BAL     0.000653\n",
       "CCR_TOT_BAL     0.000653\n",
       "CHQ_TOT_BAL     0.000653\n",
       "TERM_TOT_BAL    0.000653\n",
       "HF_TOT_BAL      0.000653\n",
       "TOT_BAL         0.004244\n",
       "AGE             0.444623\n",
       "age_pers        0.444623\n",
       "mbl_prc         1.153016\n",
       "olb_prc         1.153016\n",
       "gender_cd       2.940975\n",
       "mrtl_st_cd      0.160286\n",
       "segm_fin        0.106422\n",
       "dtype: float64"
      ]
     },
     "execution_count": 842,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "null_prc = data.isnull().sum()/data.isnull().count()*100\n",
    "null_prc[null_prc>0]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 843,
   "metadata": {},
   "outputs": [],
   "source": [
    "nullify = ['BAL', 'prc']\n",
    "variables_nullify =  [x for x in list(data) for xs in nullify if xs in x]\n",
    "\n",
    "for variable in variables_nullify:\n",
    "    data[variable].fillna(0, inplace = True)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 844,
   "metadata": {},
   "outputs": [],
   "source": [
    "## ONLY FOR ALL CUSTOMERS \n",
    "# variables_to_drop = ['AGE','segm_fin'] \n",
    "# for variable in variables_to_drop:\n",
    "#     data = data.drop(variable,1) "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 845,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "Series([], dtype: float64)"
      ]
     },
     "execution_count": 845,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data.dropna(axis= 0,inplace = True)\n",
    "null_prc = data.isnull().sum()/data.isnull().count()*100\n",
    "null_prc[null_prc>0]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 846,
   "metadata": {},
   "outputs": [],
   "source": [
    "data.set_index('ocif_id', inplace = True)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 899,
   "metadata": {},
   "outputs": [],
   "source": [
    "#data.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 861,
   "metadata": {},
   "outputs": [],
   "source": [
    "y = data.loc[:,response]\n",
    "X = data.drop (response, 1)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 862,
   "metadata": {},
   "outputs": [],
   "source": [
    "random = 2019\n",
    "test_prc = 0.3\n",
    "\n",
    "X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = test_prc, random_state = random)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 863,
   "metadata": {},
   "outputs": [],
   "source": [
    "data_train = X_train\n",
    "data_train[response] = y_train\n",
    "\n",
    "data_test = X_test\n",
    "data_test[response] = y_test"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 864,
   "metadata": {},
   "outputs": [],
   "source": [
    "def create_dummies(data, to_print):\n",
    "    \n",
    "    categorical_variables = data.select_dtypes(include = ['category', 'object']).columns.tolist()\n",
    "    dummy_variables = pd.get_dummies(data.loc[:,categorical_variables], drop_first = True)\n",
    "\n",
    "    data = pd.merge(data, dummy_variables, left_index = True, right_index = True)\n",
    "    data_out = data.drop(categorical_variables, axis = 1)\n",
    "    \n",
    "    if to_print == 1:\n",
    "    \n",
    "        print (\"List of all categorical variables: \", \"\\n\")\n",
    "        print (*categorical_variables, sep = \"\\n\")\n",
    "        print (\" \")\n",
    "\n",
    "        print (\"After creating dummy variables, the list looks like this: \", \"\\n\")\n",
    "        print ( *data_out.columns.tolist(), sep = \"\\n\")\n",
    "        print (\" \")\n",
    "        \n",
    "    return data_out"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 865,
   "metadata": {},
   "outputs": [],
   "source": [
    "data_train = create_dummies(data_train,0)\n",
    "data_test = create_dummies(data_test,0)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 866,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\u001b[1mCHECK\n",
      "\u001b[0m\n",
      "In training data, but not in testing: []\n",
      "In testing data, but not in training: [] \n",
      "\n",
      "Variables in training: 69  Records in training: 206,805\n",
      "Variables in testing:  69  Records in testing:  88,632\n"
     ]
    }
   ],
   "source": [
    "print('\\033[1m' + 'CHECK\\n' + '\\033[0m')\n",
    "print('In training data, but not in testing:',list(set(data_train) - set(data_test)))\n",
    "print('In testing data, but not in training:',list(set(data_test) - set(data_train)), '\\n')\n",
    "print('Variables in training:',data_train.shape[1], ' Records in training:','{0:,d}'.format(data_train.shape[0]))\n",
    "print('Variables in testing: ',data_test.shape[1], ' Records in testing: ', '{0:,d}'.format(data_test.shape[0]))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 867,
   "metadata": {},
   "outputs": [],
   "source": [
    "all_variables = list (data_train)\n",
    "all_variables.remove(response)\n",
    "\n",
    "supes_important = ['', '', '']\n",
    "one_var = ['']\n",
    "#important_from_model = pd.Series(best_classifier.feature_importances_, index=X_test.columns).nlargest(15).reset_index()['index'].tolist()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 868,
   "metadata": {},
   "outputs": [],
   "source": [
    "#you can use all_variables, important_variables, or supes_important \n",
    "\n",
    "variables_to_include = all_variables\n",
    "\n",
    "y_train = data_train.loc[:, response]\n",
    "X_train = data_train.loc[:, variables_to_include]\n",
    "\n",
    "y_test = data_test.loc[:, response]\n",
    "X_test = data_test.loc[:, variables_to_include]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 869,
   "metadata": {},
   "outputs": [],
   "source": [
    "# ############### XGB Parameter Tunning ################\n",
    "\n",
    "# #https://www.analyticsvidhya.com/blog/2016/02/complete-guide-parameter-tuning-gradient-boosting-gbm-python/\n",
    "# # consider using GridSearchCV\n",
    "\n",
    "# xgb = XGBClassifier()\n",
    "\n",
    "# row_num = X_train.shape[0]\n",
    "\n",
    "# learning_rate_start = 0.05\n",
    "# learning_rate_end = 0.2\n",
    "\n",
    "# n_estimators_start = 3\n",
    "# n_estimators_end =  30\n",
    "\n",
    "# max_depth_start = 3\n",
    "# max_depth_end = 40\n",
    "\n",
    "# one_to_left = st.beta(10, 1)  \n",
    "# from_zero_positive = st.expon(0, 50)\n",
    "\n",
    "\n",
    "# random_grid = {  \n",
    "#     \"n_estimators\": st.randint(n_estimators_start, n_estimators_end),\n",
    "#     \"max_depth\": st.randint(max_depth_start, max_depth_end),\n",
    "#     \"learning_rate\": st.uniform(learning_rate_start, learning_rate_end)\n",
    "# #    \"colsample_bytree\": one_to_left,\n",
    "# #    \"subsample\": one_to_left,\n",
    "# #    \"gamma\": st.uniform(0, 10),\n",
    "# #    'reg_alpha': from_zero_positive,\n",
    "# #    \"min_child_weight\": from_zero_positive,\n",
    "# }\n",
    "\n",
    "# # random_grid = {  \n",
    "# #     \"n_estimators\": st.randint(n_estimators_start, n_estimators_end),\n",
    "# #     \"max_depth\": st.randint(max_depth_start, max_depth_end),\n",
    "# #     \"learning_rate\": st.uniform(learning_rate_start, learning_rate_end),\n",
    "# #     \"colsample_bytree\": one_to_left,\n",
    "# #     \"subsample\": one_to_left,\n",
    "# #     \"gamma\": st.uniform(0, 10),\n",
    "# #     'reg_alpha': from_zero_positive,\n",
    "# #     \"min_child_weight\": from_zero_positive\n",
    "# # }\n",
    "\n",
    "# # Random search of parameters, using 3 fold cross validation, \n",
    "# # search across 100 different combinations, and use all available cores\n",
    "# xgb_random = RandomizedSearchCV(estimator = xgb, \n",
    "#                                            param_distributions = random_grid, \n",
    "#                                            n_iter = 20, cv = 10, scoring = 'roc_auc', verbose=True, \n",
    "#                                            random_state=100)\n",
    "\n",
    "\n",
    "# start = time.time()\n",
    "# xgb_random.fit(X_train,y_train)\n",
    "# end = time.time()\n",
    "\n",
    "# print(\"Execution Time Was: \", (end - start)/60, \"minutes\")\n",
    "\n",
    "# XGBClassifierTuned = XGBClassifier()\n",
    "# XGBClassifierTuned.set_params(**xgb_random.best_params_)\n",
    "# XGBClassifierTuned.get_params()\n",
    "# #####################################################################################"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 870,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "It started at: 2019-09-09 16:42:24.313275\n",
      "Execution Time Was:  33 seconds\n"
     ]
    }
   ],
   "source": [
    "best_classifier =  XGBClassifier() \n",
    "#RandomForestClassifier() # GradientBoostingClassifier() DecisionTreeClassifier() XGBClassifier() #LogisticRegression()\n",
    "\n",
    "import datetime\n",
    "start = time.time()\n",
    "\n",
    "print(\"It started at:\", datetime.datetime.now())\n",
    "\n",
    "best_classifier.fit(X_train, y_train)\n",
    "\n",
    "end = time.time()\n",
    "\n",
    "model_ran = int(end - start)\n",
    "\n",
    "print(\"Execution Time Was: \", model_ran, \"seconds\")\n",
    "\n",
    "y_pred_test = best_classifier.predict(X_test)\n",
    "y_pred_train = best_classifier.predict(X_train)\n",
    "\n",
    "y_pred_prob_test = best_classifier.predict_proba(X_test)\n",
    "y_pred_prob_train = best_classifier.predict_proba(X_train)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 871,
   "metadata": {},
   "outputs": [],
   "source": [
    "# # ########## Different Threshold ##########\n",
    "\n",
    "# optimal_idx = np.argmax(tpr - fpr)\n",
    "# optimal_threshold = thresholds[optimal_idx]\n",
    "\n",
    "# y_pred_test = (y_pred_prob_test[:,1] >=optimal_threshold).astype(bool)\n",
    "# y_pred_train = (y_pred_prob_train[:,1] >=optimal_threshold).astype(bool)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 872,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      " Accuracy on Testing: 83.25 %\n",
      " AUC on Testing: 71.44 %\n",
      " Recall on Testing: 99.89 %\n",
      " Precision on Testing: 83.31 %\n",
      " Log-Loss on Testing: 0.41 \n",
      " ############################## \n",
      " Accuracy on Training: 83.28 %\n",
      " AUC on Training:  71.93 %\n",
      " Recall on Training: 99.9 %\n",
      " Precision on Training: 83.32 %\n",
      " Log-Loss on Training: 0.41 \n",
      "\n"
     ]
    }
   ],
   "source": [
    "acc_test = round(100*accuracy_score(y_test, y_pred_test),2)\n",
    "acc_train = round(100*accuracy_score(y_train, y_pred_train),2)\n",
    "\n",
    "auc_test = round(100*roc_auc_score(y_test, y_pred_prob_test[:,1]),2)\n",
    "auc_train = round(100*roc_auc_score(y_train, y_pred_prob_train[:,1]),2)\n",
    "\n",
    "ll_test = round(log_loss(y_test, y_pred_prob_test),2)\n",
    "ll_train = round(log_loss(y_train, y_pred_prob_train),2)\n",
    "\n",
    "tn_test, fp_test, fn_test, tp_test = confusion_matrix(y_test, y_pred_test).ravel()\n",
    "tn_train, fp_train, fn_train, tp_train = confusion_matrix(y_train, y_pred_train).ravel()\n",
    "\n",
    "recall_test = round(100*tp_test/(tp_test+fn_test),2)\n",
    "precision_test = round(100*tp_test/(tp_test+fp_test),2)\n",
    "\n",
    "recall_train = round(100*tp_train/(tp_train+fn_train),2)\n",
    "precision_train = round(100*tp_train/(tp_train+fp_train),2) \n",
    "\n",
    "print(\n",
    "      \" Accuracy on Testing:\", acc_test, \"%\\n\", \n",
    "       \"AUC on Testing:\", auc_test, \"%\\n\",\n",
    "      \"Recall on Testing:\",recall_test, \"%\\n\",\n",
    "      \"Precision on Testing:\", precision_test, \"%\\n\",\n",
    "      \"Log-Loss on Testing:\", ll_test, \"\\n\",\n",
    "      \"##############################\", \"\\n\",\n",
    "      \"Accuracy on Training:\", acc_train, \"%\\n\",\n",
    "      \"AUC on Training: \", auc_train, \"%\\n\",\n",
    "      \"Recall on Training:\", recall_train, \"%\\n\",\n",
    "      \"Precision on Training:\", precision_train, \"%\\n\",\n",
    "       \"Log-Loss on Training:\", ll_train, \"\\n\"\n",
    ")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 873,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "#ROC Curve: Test\n",
    "fpr, tpr, thresholds = roc_curve(y_test, y_pred_prob_test[:,1])\n",
    "\n",
    "plt.clf()\n",
    "plt.plot(fpr, tpr)\n",
    "plt.xlabel('False Positive Rate')\n",
    "plt.ylabel('True Positive Rate')\n",
    "plt.title('ROC curve')\n",
    "plt.show()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 874,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 2 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "cm = skplt.metrics.plot_confusion_matrix(y_test, y_pred_test, normalize=True)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 875,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "True Positive: 73706 \n",
      "False Positive: 14766 \n",
      "True Negative: 78 \n",
      "False Negative: 82\n"
     ]
    }
   ],
   "source": [
    "tn, fp, fn, tp = confusion_matrix(y_test, y_pred_test).ravel()\n",
    "print('True Positive:', tp,'\\nFalse Positive:', fp, '\\nTrue Negative:', \n",
    "      tn,'\\nFalse Negative:', fn)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 876,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "image/png": "iVBORw0KGgoAAAANSUhEUgAAAgIAAAD8CAYAAAAFQsyMAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADl0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uIDIuMi4yLCBodHRwOi8vbWF0cGxvdGxpYi5vcmcvhp/UCwAAIABJREFUeJzt3XmcXFWd/vHPAwoIYQcRWQyrDCCERVAEBARhRkbBAQEZIG7IuOsPBxVnBBUF0XEXBpVVh90AAoLIJltIAoSEfUtARFQWgbCG8Pz+uKegqHR3VXWqqzqp5/169aurzz33nG91Gu6pc889X9kmIiIi+tNCvQ4gIiIieicDgYiIiD6WgUBEREQfy0AgIiKij2UgEBER0ccyEIiIiOhjGQhERET0sQwEIiIi+lgGAhEREX3sNb0OIKKZFVZYwWPHju11GBER85UbbrjhEdsrNquXgUCMemPHjmXKlCm9DiMiYr4i6f5W6uXWQERERB/LQCAiIqKP5dZAjHrT//wEY790Qa/D6JiZR76n1yFERLxsWDMCkn4haf1OBzNAPzMlXdVQNlXSLQ1lP5D0Z0kL1ZV9QdLxdT/vK2nIq4mkAyXdUb4mSdq67tgVkjZvqL+dpCdKTNMk/UHS64dof7wkS9qxrmy3UrZHXT93ljZvl3Rgw+9jhaHeQ13df5Y0RdJtkm6S9L1SfmKtr7q6s8r3hST9SNItkqZLmixpDUnXl3gekPT38nqqpLGD9D2znD+99P9NSYtJekvduY9JmlFe/6GV9xQREZ03rBkB2x/tdCBDWFLSarb/JOmfGg+Wi//uwJ+AdwKXl0M/AqZIegdwK/BN4F2DdSJpV+DjwNa2H5G0KXCOpC1sPzxEfFfZ3rW08W3gk8DXhqg/HdgbqF389gFubqizr+0pkpYD7pV0ou0Xhmiz8b1sCPwEeI/tOyQtDBzY5DSAvYA3AhvZfknSqsDTtrcs7Y4HNrf9qRba2r78HscAxwH/a/sAYFxp60TgfNtntfq+IiKi85rOCEhaQtIFkm4unxT3qv90LGmWpCPK8YmSVirlK0maUMpvlrRVKf/38ml7qqT/LRepoZxBdYGC6qJ5asPx7agu9MeU4wDYfhH4BPBT4DvA8bbvG6KfQ4Av2n6knH8jcBLVhb0pSQKWBB5vUvUqYAtJry0XybWBqYPUHQM8DcxpJYY6/wkcYfsOANtzbB/TwnkrA3+x/VI570Hbzd7PkGzPAg4CdisDm4iIGEVauTWwC/CQ7Y1tbwhc1HB8CWCi7Y2BPwIfK+U/Aq4s5ZsCt5ZP9HsB77A9juoCt2+T/s8G3l9e/yvw24bjtcHBBOA9kl5bO2D7WuB2YEeqwcBQNgBuaCibUsqHso2kqcADpZ/jm9Q31WzAzsD7gPMGqPNrSdOAO4Fv2G53ILAhc7+XVpwB/GsZpH1P0ibDaGMutp8EZgDrtHpOuU0zRdKUOc880YkwIiJiAK0MBKYDO0k6StI2thv/r/wCcH55fQMwtrzegepTeu0T6RNUU/ObAZPLxfNdwJpN+n8UeFzS3lQX9WdqByQtAvwLcE652FxPdYGtHR8DbA68Fmi6qcIwXWV7nO3VgBNoPuAAOI3q9sDezD3DAdWtgY2A1YGDJb2pY9FWA5EBy2w/CLwZ+DLwEnCppEFvp7RJ7VS2fZztzW1vvvDiS3cohIiIaNR0jYDtu8r98n8Bvinp0oYqs23XLi5zmrQp4CTbX24zztOppvjHN5TvDCwDTK9m5lkceJZXBiaHA78C/gp8H9hziD5uoxqkXFZXthnVbYdWnUc1gzEk25MkvQV4pvx+B6v3d0k3AlsCLW0MUdxKFXvj2gOoBlbL1n4o0/WP1PX5PPA74HeS/grsBjT+m7dF0pJUA8S75qWdiIjovKYDAUlvBB6z/StJ/wBaXSh4KfAfwA/KOoAxpexcSd+3/bdyEVrSdrOL3ASq+9cXUy1mq9kH+KjtU0usSwAzJC0OrAW8h2px2gvARyTtZPuSQfr4DnCUpF1sPyppHNXAY8sW3y/A1sC9Ldb9EvDcUBXK+9iE1mYZ6h0N/EbS1WWgsRBwoO1jgSuAz0k6qSxAHE9ZYFkGfA/bfqicsxEwrc2+G9/DGOBnVLM2w1pv8JZVlmZKHrmLiBgRrTw18BbgaEkvAbOpLu7fbeG8zwLHSfoI1UzBf9i+TtJXgd+XC81sqsV4Qw4EbD8FHAVQ+/RcLpK7UC1Eq9V7WtLVVGsJPg183vZzpf5/ACdLGjfQCnzb50laBbhWkoGngH+3/Ze6ahdIml1eX0c1S1FbIyDgCVocKNn+3RCHfy3pWWBR4ETb9ff7p5V/C4AzbH9hgLanSfoccGr5PZkyS2L7fEmbATdImkM1cKn9Dl8P/FzSouXnSVRPHwzH5WUB5UJUA7lvDLOdiIgYQXplVj9idNp8882dXAMREe2RdIPtzZvVyxbDERERfWxUbDEs6XqqafB6+9mePgJ9HcrciwbPtH1EB/v4ENWtkXrX2G5pT4LR1s8Q/Xft3y0iIkZGbg3EqJdbAxER7cutgYiIiGhqVNwaiBjKgpZ9sF4yEUZEr2VGYAElafm6TH8Pq8rOWPt5dUnnSrpb0r2SfihpEUk719WZpVeyIJ48SB9Nsy9KOkfSxIaywyQdPJLvPyIiWpOBwALK9qNl6+NxwLHA98vrTYCzqDb4WQdYl2qzpyNsX1x3zhSqrY7H2d5/iK5qWyxvBEymLkmTpGWodjhcWlKzraQjIqIHMhDoPzsAz9k+Aao8EMDngQ+XzYeGZZDsi++nShJVy60QERGjTAYC/WeuLIslYdMDVCmR2zVU9sVaZshTqUsR3YpkH4yI6I4MBGJeDZh9UdJKVGmHr7Z9FzBb0oatNprsgxER3ZGBQP+pZVl8maSlqFIe3zOPbZ8HbFtef4Aqy+EMSTOpsg+2NSsQEREjLwOB/nMpsLik/QFKZsjvUSU3emYe267PvrgPsIvtsbbHUg0+sk4gImKUyT4Cfca2Je0O/EzSf1ENBi8EvjLMJufKvihpLPAm4OXHBm3PKI8a1tI6f7VkSKwdX3WwDpKGOCJi5GSL4Rj1ssVwRET7ssVwRERENJVbA9GUpJ2BoxqKZ9jevRfxRERE52QgEE3Zvhi4uNdxRERE5+XWQERERB/LQCAiIqKP5dZAjHpJQxwRMXIyIxAtkTRW0i0dbG87SVt1qr2IiBieDAT6XNlZsBe2AzIQiIjosQwEFmDlU/wdkn4t6XZJZ0laXNJMSUdJuhHYU9I4SRMlTZM0QdKy5fzNJN0s6Wbgk036WljSdyXdUtr5dCmfKelwSTdKmi5pvbLz4EHA5yVNlbTNyP4mIiJiMBkILPjeDPzM9j8BTwKfKOWP2t7U9mnAycAhtjcCpgNfK3VOAD5te+MW+jmQKrHQuNLOr+uOPWJ7U+AY4GDbM4Fjge+XzIVXNTaWNMQREd2RgcCC70+2rymvf0WVGAjgdABJSwPL2L6ylJ8EbCtpmVL+x1J+SpN+dgT+1/aLALYfqzv2m/L9BqrBQlNJQxwR0R0ZCCz4GpNJ1H5+uosxPF++zyFPqkREjCr5n/KCb3VJb7d9HfBB4Gpgk9pB209IelzSNmWKfj/gStv/kPQPSVvbvhrYt0k/lwAfl3S57RclLdcwK9DoKWCpVt5Asg9GRIyczAgs+O4EPinpdmBZqvv0jQ4AjpY0DRgHfL2Ufwj4aV2a4aH8AngAmFYWF36wSf3fArtnsWBERG8lDfECrKzOP9/2hj0OZZ4kDXFERPuShjgiIiKayhqBBVh5TK+jswFJSRwRsWDJQCDakpTEERELltwaiIiI6GOZEYhRb0HOPthMshNGxEjLjEAPSTpU0q1lb/6pkrYs5StImi3poLq6J0j6eMP5u0n63QDtLl/amyrpYUl/rvt5EUmrSjpX0t2S7pX0w1K+c129WZLuLK9PHiT+7SQ9UepMk/QHSa9vqHOOpIkNZYdJOnhefncREdEZGQj0iKS3A7sCm5a9+XcE/lQO7wlMBPapO+VUYO+GZvYu5a9i+9Gyh/84Xr2n/zhgNtWWv+fYXgdYFxgDHGH74rp6U4B9y8/7D/FWrip1NgImU5ecqGxTvBmwtKQ1W/m9REREd2Ug0DsrUyXjeR7A9iO2HyrH9gH+H7CKpFVL2aXAepJWBpC0BNXg4Zw2+90BeM72CaXfOcDngQ9LWny4b0aSgCWBx+uK30+1cdBpzD2IiYiIUSADgd75PbCapLsk/UzSOwEkrQasbHsScAawF7x8wT4b+EA5/1+BK2w/2Wa/G1Al/3lZaeMBYO1hvI9tys6DD1ANTI6vO7YP1YzFqbx6dqOpZB+MiOiODAR6xPYsqmnzA4G/A6dLGk914T+jVDuNwW8PDHhboAdqtwZWo0pb/B0ASSsB6wBX274LmC2p5T0Nkn0wIqI78tRAD5VP+VcAV0iaTrXn/xuBN0iqJfl5o6R1bN8NXAusLGljYCuGN91+G7BHfYGkpYDVgXuG9UZecR7VrAVUMxfLAjOquwYsRTWoOXQe+4iIiA7KjECPSHqzpHXqisYBCwNjbK9ie6ztscC3KbMCrhJDnA6cBPzO9nPD6PpSYHFJ+5c4Fga+B5xo+5lhv6HK1sC95fU+wC5172Mzsk4gImLUyYxA74wBflxW1r9I9Wn8emBaQ72zqS7+tYyApwL/CXxpOJ3atqTdgZ9J+i+qweCFwFeG0x6vrBEQ8ATw0ZLs6E1UTz7U+p1RHjXcshR9VdLn6o6vyiCShjgiYuQk+2CMesk+GBHRvmQfjIiIiKZya2A+J2l5qvv+jd5l+9EO9ZGMgxERC6gMBOZz5WI/boT7SMbBiIgFVG4NRERE9LEMBCIiIvpYbg3EqNfPaYhrko44IkZKZgQ6TNIbJJ1W0vveIOlCSetKuqWh3supeFX5akkLfJekKyVt1EJf4yRZ0i6txFCOrVt+vlvSjZLOkLRXO+mHSztbSPpjqXuTpF9IWlzSeEkv1ccv6RZJYyVdX9p9QNLf6/oc295vOSIiOiUzAh1UMvBNAE6yvXcp2xhYqcmpn6TaMnhj289IejdwnqQNbD89xHn7AFeX7xc1i0HSA8AFwBds/7Yc244qC+K48vMVwMG2B31wv+QROBPY2/Z1pWwPquyDAA9SbSW8V/15trcsdccDm9v+VJPfS0REjLAMBDpre2C27WNrBbZvbuET7yHAO2tb/Nr+vaSrgH2B4wY6oVzw9wR2Aq6StFjZcnjAGMo5Hwauqw0CyrEr2n2TVAOXk2qDgNLOWaUPgPOBbSW92fadw2g/IiK6JLcGOmtDGlL81lmrbip8KnAQvJzwZwnb9zXUnwKsP0RfW1E9y38vVeKi2k3koWIY6lg7mrXzElUWwuFuW5w0xBERXZKBQPfcW9L1jivT8Mc2PWNo+1ClKYa50xWPBv8HvE3SGsM5OWmIIyK6IwOBzrqVKstey2w/CTwtac2GQ5tRzQrMpWQM/DfgvyXNBH4M7CJpySYxtB3fcNux/SJVVsNDOtBfRESMkKwR6KzLgG9JOtD2cQBl9Xyzj7RHAz+StKftZyXtCGwAHDhI/XcB02zvXCuQdBKwO3DKEDH8H/BlSe+xfUE5ti3wmO1bGjsZwk+ASZIusH19aef9wDUN9U6kypS4JPMg2QcjIkZOZgQ6yFUqx92BHcuje7cC3wYebnLqj4FJwLTyCf9kYKey+G8g+1A9GVDvbGCfoWKw/SywK/Dp8vjgbcAngL+3+T7/CuwNfLc8Png7sDPwVEO9F4AfAa9vp/2IiOiepCEeZSSNobrIT7Y97MV2C5KkIY6IaF+raYhza2CUsT2L6pHAiIiIEZeBwCgn6Xpg0Ybi/WxP70LfST8cEbGAy0BglKvtxtejvpN+OCJiAZfFghEREX0sMwIx6iX74KslE2FEdFJmBOYDkpaR9IkmdcZK+mALbY1tzITYcHw7SecPJ85y/rXDPTciIrovA4H5wzJUz/sPZSzQdCAw0mxv1esYIiKidRkIzB+O5JWkRUeXr1skTZe0V12dbUqdz5dP/ldJurF8tX2BlrScpHMkTZM0sexQiKQVJV0i6VZJv5B0v6QVyrFZ5ft2kq6QdJakOyT9umRMRNKRkm4r7X63I7+hiIgYlqwRmD98CdjQ9jhJ/0aVuXBjYAVgsqQ/ljoH294VQNLilN0JJa0DnAo03ViiweHATbZ3k7QD1Y6H44CvAZfZ/rakXYCPDHL+JlRbJT9Etf3wO8ouhLsD69m2pGUGOlHSgZQtlhdeasU2w46IiFZlRmD+szVwqu05ZavfK4G3DlDvtcDPJU0HzmTolMZD9XUKgO3LgOVL2uStKZkPbV8EPD7I+ZNsP2j7JWAq1e2LJ4DngF+W/ATPDHRisg9GRHRHBgILrs8Df6WaOdgcWKQHMTxf93oO8JqSlXAL4CyqvAcX9SCuiIgoMhCYPzzFKxn8rgL2krSwpBWBbakSFtXXgSrb4F/Kp/H9gIWH0e9VwL5Q3fMHHilpk68BPlDK3w0s22qDJZfC0rYvpBqsbDyMuCIiokOyRmA+YPtRSdeUx/5+B0wDbgYM/KfthyU9CsyRdDNV+t+fAWdL2p/qU/fTw+j6MOB4SdOopvAPKOWHA6dK2g+4jiq74lMDtjC3JYFzJS0GCPhCsxOShjgiYuQk+2C0TdKiwBzbL0p6O3CM7XEj1V+yD0ZEtC/ZB2MkrQ6cIWkh4AXgYz2OJyIihikDgT41L5kFbd9N9WhgRETM5zIQ6FPJLBgREZCnBiIiIvpaBgIRERF9LLcGYtRLGuJXSxriiOikzAj0iKQ3SDpN0r2SbpB0oaR1y9eFku4uyYLOkLRSSeLzREkqdMdQyXokfajUmyrphZKcaKqkI8vx3UrCn9vLsd1K+U9LvdskPVvXxh6D9HOipBl1MX2t4fgKkmZLOqihfGYtSVFERPRWZgR6oGThmwCcZHvvUrYxsBJwPPAF278t5dsBtaw7V9neVdLrgJskTbB9TWP7tk8ATijnzwS2t/1IXT/fpUpINEPSGsAlku6z/clSZyxwfot7A3zR9lllg6DbJJ1se0Y5ticwEdgHOLb131BERHRLZgR6Y3tgtu2XL462bwbWAa6rDQJK+RW2b6k/2fazVEl8VhlG3wcD36pdrMv3bwNfHEZb9RYr3+t3MNwH+H/AKpJWncf2IyJiBGQg0BsbAje0Uf4qkpalGjT8cRh9bzBAH1NK+XAcLWkq8CBwmu2/lRhXA1a2PQk4A9irnUYlHShpiqQpc555YpihRUREMxkIzF+2KbkE/gxcbPvhXgdEdWtgHPAG4F2Stirle1ENAKBKWbxPO40mDXFERHdkINAbtwKbtVFec5Xtjak+vX9E0nD2979tgD42K30Pm+1ZwBXA1qVoH2B8WaNwHrCRpHXmpY+IiOi8LBbsjcuAb0k60PZxAJI2Au4CvizpPbYvKOXbAo/Vn1wW+R0JHEKbn7SpFgqeKeky2zPLwsCvAAM+GdAqSa8BtgR+LGldYIztVeqOH15i/Xq7bSf7YETEyMmMQA+4Svm4O7BjeXzwVqoFew8DuwKfLo8P3gZ8Avj7AM0cC2xbLuTt9D2VagDxW0l3AL+lSmU8dZhvp7ZGYBowHfgN1QV/QkO9s3n1oGWapAfL1/8Ms++IiJhHSUMco17SEEdEtK/VNMSZEYiIiOhjWSMwn5P0IeCzDcXX1DYH6lAfPwXe0VD8w7JxUUREzMcyEJjP1e8iOIJ9dGxQERERo0tuDURERPSxzAjEqJfsg+1JdsKIaEdmBEbISGYXbOjnHEkTByjfX9ItJbvgTZIOrjt2cOljqqTJpe6E8vM9dXFMrdspsLH910o6su59XCfpn8uxmZLOrqu7R8lUOGRWxIiI6L7MCIyAkc4uWNfPMlS7As6StKbt+0r5PwOfA95t+yFJiwL7l2MHATsBW9h+UtJSwO62d6+L52DbuzZ5m98AVgY2tP28pJWAd9Yd30zS+rZvqxUMlRUxIiJ6IzMCI6Nb2QXfT7Uh0GnA3nXlX6a6mD9U2nve9s/Lsa8A/2H7yXLsSdsntfPmJC0OfAz4tO3nSzt/tX1GXbXvAYe2025ERHRfBgIjo1vZBfcBTi1f9bv2DdhP+fS/ZG3mYB6sDTxQG0wM4gxgU0lrD6eDZB+MiOiODARGl5azC5ap+HWAq23fBcyWtGGX4mzFHOBoqtmJtiX7YEREd2QgMDK6kV3wA8CywIxyv30sr8wKDNhP+QQ/S9Kazd5AE/cAq5cZhqGcAmwLrDaP/UVExAjJQGBkXAYsKunAWkFddsGtJL2nrnzbxk/ytmcAteyCg9kH2MX2WNtjqS78tXUC36ZKBvSG0scikj5ad+yntYu4pDGS9m/nzdl+Bvgl8ENJi5R2VpS0Z0O92cD3gc+3035ERHRPnhoYAbYtaXfgB5IOAZ4DZlKt5N+1lP8AmE2Vte+zwAoNzRwLHCxprO2Z9QdKxsE3AS8/NlhSEz8haUvbF5ZbB38oTzCY6mkFgGOAMcBkSbNLDN8bxtv8KvBN4DZJzwFPA/89QL1flrrDljTEEREjJ9kHY9RL9sGIiPYl+2BEREQ0lVsDo1w3sgs26X8CsEZD8SG2L+5G/xERMbIyEBjlupFdsEn/u/eq74iIGHm5NRAREdHHMhCIiIjoY7k1EKNe0hB3RtITR8RA+n5GQNKs8n07See3cd6ekm6XdLmk8ZJ+0sa5J0rao8W6bcU1wPnXDvfckSRpN0nr9zqOiIh+1/cDgXnwEeBjtrfvdSBDsb1Vr2MYxG5ABgIRET3WVwMBSV+QdEv5+twAVZaSdIGkOyUdK2nA34+k/wa2Bn4p6ehSvJqkKyTdLelrdXX3lzRN0s2STqlrZseSXe8uSbu2GP9yks4p7U0s2xbXtve9RNKtkn4h6X5JK5Rj9TMeV0g6S9Idkn5ddh0crK+3Srq2xD1J0pKSFpN0gqTpkm6StH2p+6oZEUnnS9qu1r+kI0o7EyWtJGkr4L1U2yBPlbRWK+8/IiI6r2/WCEjaDPgQsCUg4HpJVzZU24LqU+r9wEXA+4GzGtuy/XVJOwAH254iaXw5d0PgGartey8AnqXaXncr249IWq6umbHlnLWAyyWtbfu5Jm/jcOAm27uV/k8GxgFfAy6z/W1Ju1DNVgxkE6qERg8B1wDvAK5urFTyB5wO7GV7cslL8CzVfga2/RZJ6wG/l7Ruk5iXACbaPlTSd6hmUb4p6TzgfNtz/X5LDAcCBwIsvNSKTbqIiIjh6qcZga2BCbaftj0L+A2wTUOdSbbvsz0HOLWc06pLbD9q+9nS9tbADsCZth8BsP1YXf0zbL9k+27gPmC9Ft/DKaWty4Dly0V6a+C0Un4R8Pgg50+y/aDtl4CpVIORgbwZ+IvtyaXNJ22/WPr5VSm7g2rA1Gwg8AJQW+NwwxB9vkrSEEdEdEc/DQRa0Zh4oZ1EDO2eOy99Ddfzda/n0LkZoRd59d/SYnWvZ/uVhBad7DMiIjqgn/6nfBVwoqQjqW4N7A7s11BnC0lrUH3S3Qs4ro32dypT/89SLYT7cHk9QdL/2H5U0nJ1swJ7SjqJavveNYE7W3wP+wLfKPfgH7H9pKRrgA8AR0l6N7BsG3EP5E5gZUlvLbcGlizvpdb/ZeWWwOql7lLAJ8qailWobnk08xSwZCvBJPtgRMTI6ZuBgO0bJZ0ITCpFv7B9U8N6ucnAT4C1gcuBCW10MQk4G1gV+JXtKQCSjgCulDQHuAkYX+o/UM5ZCjiohfUBAIcBx0uaRrUW4YBSfjhwqqT9gOuAh6kutMNi+wVJewE/lvQ6qkHAjsDPgGMkTaeaBRhv+/kyEJkB3AbcDtzYQjenAT+X9BlgD9v3DjfeiIgYvqQhXgBIWhSYY/tFSW8HjrE9rtdxdUrSEEdEtK/VNMR9MyOwgFsdOKNMzb8AfKzH8URExHwiA4EmJF0PLNpQvJ/t6R3uZ2fgqIbiGa1k/ytPHmwyzH6TZjgioo9lINCE7S271M/FQNcvvkkzHBHR3/L4YERERB/LjECMesk+2HnJRBgRNZkRiFeRdJikgwcoHyvpll7EFBERIycDgegaVfI3FxExiuR/yn2kfKq/Q9KJJevhryXtKOmakjWxtiPgxpKuK2UtPYpYMhCe25iBsfR5p6STgVuosjTuIunGkpHw0hF6uxER0YKsEeg/awN7Um2BPBn4IFUyofcCX6FKRrQR8DaqzIE3lUyKrRgoA+MjwDrAAbYnSloR+Dmwre0ZDRkZX5bsgxER3ZEZgf4zw/b0koHwVuDSkhRoOq9kBjzX9rMla+LltJY7AAbOwAhwv+2J5fXbgD/angFzZWR8WbIPRkR0RwYC/ac+A+FLdT+/xCszRMPNjDjYeU+3HF1ERHRVBgIxkPdJWkzS8sB2VLcQWrGTpOVKoqLdgGsGqDMR2LZkeWSwWwMREdEdWSMQA5lGdUtgBeAbth+SNLaF8+bKwNh4nu2/l/v/vylPEPwN2GmoRpOGOCJi5GQg0Edsz6RazFf7efxgx5qdO4gHbe/W7DzbvwN+11LQERExonJrICIioo9lRiDa0iRL4ondjygiIuZFBgLRll5lSYyIiJGRWwMRERF9LAOBiIiIPpZbAzHqJQ1x9yVNcUT/yIxAl0l6g6TTJN0r6QZJF0patzHFb3064JK176slmc9dkq6UtNEQfVwvaaqkByT9vbyeWhIALS3pZEn3lBhOLmVvqav3mKQZ5fUfBuljrKRnS52bJV0r6c0NdX4g6c/1GQdLcqKfzNtvMSIiOiUzAl0kScAE4CTbe5eyjYGVmpz6SWArYGPbz0h6N3CepA1sz7V9r+0tS9vjgc1tf6ouhrOAW2zvX34+HPiF7T2BcaXsROB822c1iete27VzPk6VtOiA8vNCwO7An4B3Um1QFBERo0xmBLpre2C27WNrBbZvprpYDuUQ4FO2nynn/B64Cti3nc4lrQ1sBnyjrvjrwOaS1mqnrQEsBTxe9/N2VEmNjgH2mce2IyJihGRGoLs2BG4Y5NhakqbW/fwG4LuSlgKWsH1fQ/0pwPpt9r8+MNX2nFqB7Tml3w2Ae9tsrxbzksDiwJbm/OQAAAASBklEQVR1x/YBTgXOBb4l6bW2Z7facNIQR0R0R2YERo97bY+rfQHHNj2j92oxrwV8DjgOQNIiwL8A59h+Erge2LmdhpOGOCKiOzIQ6K5bqabmW1YupE9LWrPh0GZUswLtuA0Y17B4byGqtQG3tdlWo/OAbcvrnYFlgOmSZgJbk9sDERGjUm4NdNdlVNPkB9qufXreCGj2kfdo4EeS9rT9rKQdqabyD2ync9v3SLoJ+CrV2gDK6xtt39NOWwPYmlduLewDfNT2qQCSlgBmSFp8OA0n+2BExMjJQKCLbFvS7sAPJB0CPAfMpJpWH8qPqT5hT5P0WmARYEPbzw0jjI8AP5ZUu2hfV8qGo7ZGQMALwEfLxX4X4KBaJdtPS7oa+NdSNF5SfZbCt9l+cJgxRETEPJDtXscQbZA0huoRxMm2v9LreLph880395Qp7d4FiYjob5JusL15s3qZEZjP2J4F7NTrOCIiYsGQgcB8TtL1wKINxfvZnt6h9t8CnNJQ/Hxt06KIiJi/ZSAwnxvpC3IZUIwbyT4iIqJ38vhgREREH8uMQIx6yT7YO8lCGLHg6/sZAUmzyvftJJ3fxnl7Srpd0uUjmVGv3bgGOP/aTsbTKZJ2k9TuFskREdFhfT8QmAcfAT5me/teBzIU21v1OoZB7Eb7uRIiIqLD+mogIOkLkm4pXwNt4rOUpAsk3Snp2PqteBva+W+qnfR+KenoUryapCsk3S3pa3V195c0TdLNkk4pZSeW9qdIukvSri3Gv5ykc0p7E8uuhEhaUdIlkm6V9AtJ90taoRyrn/G4QtJZku6Q9OuSFnmwvt4q6doS9yRJS0paTNIJkqZLuknS9qXuq2ZEJJ0vabta/5KOKO1MlLSSpK2A9wJHS5ragcyHERExTH2zRkDSZsCHqDLkCbhe0pUN1bag+pR6P3AR8H7grMa2bH9d0g7AwbanSBpfzt0QeAaYLOkC4FmqLXy3sv2IpOXqmhlbzlkLuFzS2i3sFHg4cJPt3Ur/J1Ot6P8acJntb0vahcF3CtyEamvih4BrgHcAVzdWKkmDTgf2sj25ZEB8Fvhs9fb9FknrAb+XtG6TmJcAJto+VNJ3qGZRvinpPOB823P9fksMyT4YEdEF/TQjsDUwwfbTZVOe3wDbNNSZZPu+kqb31HJOqy6x/ajtZ0vbWwM7AGfafgTA9mN19c+w/ZLtu4H7gPVafA+nlLYuA5YvF+mtgdNK+UXA44OcP8n2g7ZfAqZSDUYG8mbgL7YnlzaftP1i6edXpewOqgFTs4HAC0BtjcMNQ/T5Ksk+GBHRHf00EGhF437L7ey/3O6589LXcD1f93oOnZsRepFX/y0tVvd6tl/Zx7qTfUZERAf000DgKmA3SYuXbHi7l7J6W0hao6wN2IsBps2HsFO5h/86qoVw11BlG9xT0vJQ3eOvq7+npIXK/fE1gTtbfA/7lra2Ax4paYqvAT5Qyt8NLNtG3AO5E1hZ0ltLm0tKek1D/+sCq5e6MynpjSWtRnXLo5mngCXnMc6IiJhHffPpzPaNkk4EJpWiX9i+qWG93GTgJ8DawOVUyX1aNQk4G1gV+JXtKQCSjgCulDQHuAkYX+o/UM5ZCjioxUyChwHHS5pGtRbhgFJ+OHCqpP2osgk+THWhHRbbL0jaiypL4euo1gfsCPwMOEbSdKpZgPG2n5d0DTADuA24HbixhW5OA34u6TPAHrbvHaxi0hBHRIycZB/sgTIgGXSh3DDaWxSYY/tFSW8HjrG9wGwLnOyDERHtU7IP9pXVgTPKLY0XgI/1OJ6IiJhPZCDQhEYgu5/t8QP0szNwVEPxDNu7t9De3VSPBrZN0gRgjYbiQ2xfPJz2IiJi/pKBQBPdSrdbLrxdv/i2MtCIiIgFVz89NRARERENMhCIiIjoY7k1EKNe0hCPbklVHDF/6/sZAQ0zDXG3SDpM0sHDPHdzST/qdEydIOlzkhbvdRwREf2u7wcCCzLbU2x/ptdxDOJzQAYCERE91lcDAXUoDXFpa5ak75fUv5dKWrGUX1HKp0i6vaTz/Y2q9MTfrDt/rvTELcQ/rqTynSZpgqRlS/lbS9lUSUdLuqWUvzzLUWYWji/x3Vd29Buqr4HSJ4+VdFkpv1TS6qX8REl71P9u6vqfK/Vx6fuNVFkXL2/lvUdExMjom4GAXp2G+G3AxyQ1Pnu/BfBpqlTEa1GlIR7MEsAU2xsAV1KlAq55oezmdCxwLvBJqhTF4yUtL2kDqvTEO9jemCq9bytOpnrGfyNgel2fJwAfL7sJzhni/PWAncv7/Jqk1w5UaYj4fgycVPr/NdDKbYdNqD79r0+VU+Edtn9ElQp5e9vbDxLDgWUwNWXOM0+00E1ERAxH3wwE6Hwa4peA08vrXzXUPa98nw7cavsvtp+nSje8GkOnJx6QpKWBZWxfWYpOAraVtAywpO3rSvn/DdHMBbafL/3+DVhpkHqDxff2uvZPobU0za2mPn6VpCGOiOiOfhoItKJTaYhr6X5f4tWpf1+it09qjHga4nI7ZZEu9BkRER3QT/9Tvgo4UdKRgKjSEO/XUGcLSWsA91OlIT5uiPYWAvagyqL3QdpLWXwZMEHS/9h+VNJyzWYFbD8h6XFJ29i+qsR+pe1/SHpK0pa2rwf2biOOduO7trR/ClU64loa55nAZsAZwHuBAW85NKilIX6kWcVkH4yIGDl9MxAYgTTET1MNHL5KNc2+Vxux3DpEeuKhHAAcWx67u49qzQPAR6hS+r5EtV5hnm6qDxHfp4ETJH0R+Htd/z8HzpV0M3AR1e+mmeOAiyQ9NNg6gYiIGHlJQzxMkmbZHtPrOAAkjSnrHpD0JWBl260uQBz1koY4IqJ9SUPcX94j6ctU/57309rsQkRERAYCzQyRhrijswGSDgX2bCg+0/YRzc61fTqvPMHQTp/LA5cOcOhdth9tt72IiJj/ZCDQRBfTEB8BNL3od7jPR4Fx3ewzIiJGlzw+GBER0ccyIxCjXrIPLniSsTBi9MiMwCgkaRlJn+hVf53KxDgvmRMjIqI7MhAYnZYB2hoISFq4m/11iqTMSkVE9FAGAqPTkcBaJZvg5IEy+AFIminpKEk3MvcTB5Q6rWRDrO/v6FI2ZqA+B+ljpqTDJd0oabqk9eoObyzputLfx0r97SRdJek84LZ5/F1FRMQ8yKex0elLwIa2x0najiqD4QZUGfuuAd7BK1saP2p70ybtvWB7c0mfLW1tBjwG3Cvp+/X9QXWhpsoaOFifA3nE9qblFsPBwEdL+UZU2R6XAG6SVLvZv2npc8ZAjUk6EDgQYOGlVmzy9iIiYrgyIzB/GCqDXyv7BzTLhthunwP5Tfl+Q0Pdc20/WzIZXk6VArnW/oCDAEj2wYiIbslAYP4wVAa/Vvb1H042xHazBtbqN9YdLKNjK3FHRMQIy0BgdKpl5lsQ+nufpMXKLobbUSV2ioiIUSJrBEahkvr3Gkm3AM8Cf+1if78DOvnQ/jSqWwIrAN+w/ZCkddtpIGmIIyJGTrIPxqiX7IMREe1rNftgbg1ERET0sdwaWEBI+inVI371fmj7hA72MQFYo6H4ENsXd6qPiIjorgwEFhC2P9mFPnYf6T4iIqK7cmsgIiKij2UgEBER0cdyayC6puQrUNmtsGVJQxwR/ahb6bozI7CAknSOpBsk3Vr27UfSRyTdJWmSpJ9L+kkpX1HS2SXB0WRJjYsO69s9TNIpjYmEyrEvlvOnSTq8lI2VdKekk4FbgNUknSjplpKg6PMj+5uIiIihZEZgwfVh249Jeh0wuST7+S+qZD9PAZcBN5e6PwS+b/tqSasDFwP/NETbAyUS2hBYhyqXgIDzJG0LPFDKD7A9UdJmwCq2NwSQtExH33VERLQlA4EF12ck1Vb5rwbsB1xp+zEASWcCtR3+dgTWr8s0vJSkMbZnDdL2ubafBZ6VVEsktDXwbuCmUmcM1QDgAeB+2xNL+X3AmpJ+TLWD4e/n/a1GRMRwZSCwACpphHcE3m77GUlXAHcw+Kf8hYC32X6uxS4GSiQk4Nu2/7chlrHUJRiy/bikjYGdgYOADwAfHuA9JA1xREQXZI3Agmlp4PEyCFiPV6bx3ylpWUmvAf6trv7vgU/XfpA0rkn7AyUSuhj4sKQxpY1VJL2+8URJKwAL2T4b+CrVrYq5JA1xRER3ZEZgwXQRcJCk24E7gYnAn4FvAZOAx6hmCJ4o9T8D/FTSNKq/iT9SfVofzFyJhICHJP0TcF25xTAL+HeqtMT1VgFOkFQbhH55Ht5nRETMoyQd6iO1+/5lRmACcLztCW22cRgwy/Z3RyLGgSTpUERE+5J0KAZymKSpVI/xzQDO6XE8ERHRY7k10EdsH9xqXUkfAj7bUHxNN3IaRERE92QgEAMqWQs7lrkwIiJGp6wRiFFP0lNUix5HmxWAR3odxAASV3sSV3sSV3t6GdebbDd9/jozAjE/uLOVBS/dJmlK4mpd4mpP4mpP4hq+LBaMiIjoYxkIRERE9LEMBGJ+cFyvAxhE4mpP4mpP4mpP4hqmLBaMiIjoY5kRiIiI6GMZCERPSdpF0p2S7pH0pQGOLyrp9HL8+pLNsHbsy6X8Tkk7j4a4JO0k6QZJ08v3HUZDXHXHV5c0S1LLm0uNdFySNpJ0naRby+9tsV7HJem1kk4q8dwuqaM5MVqIa1tJN0p6UdIeDccOkHR3+TpgNMQlaVzdv+E0SXuNhrjqji8l6UFJPxktcZX/Fn9f/r5ua/xvtats5ytfPfkCFgbuBdYEFgFuBtZvqPMJ4Njyem/g9PJ6/VJ/UWCN0s7CoyCuTYA3ltcbAn8eDb+vuuNnAWcCB4+GuKgeYZ4GbFx+Xn6U/Dt+EDitvF4cmAmM7WJcY4GNgJOBPerKlwPuK9+XLa+XHQVxrQusU16/EfgLsEyv46o7/kPg/4CfdPnvftC4gCuAncrrMcDinYqt3a/MCEQvbQHcY/s+2y8ApwHva6jzPuCk8vos4F2SVMpPs/287RnAPaW9nsZl+yZX2RgBbgVeJ2nRXscFIGk3qhwTt3Yonk7E9W5gmu2bAWw/arsxY2Uv4jKwhKoEXa8DXgCe7FZctmfanga81HDuzsAlth+z/ThwCbBLr+OyfZftu8vrh4C/AU03shnpuAAkbQasRJVuvZOGHZek9YHX2L6k1Jtl+5kOx9eyDASil1YB/lT384OlbMA6tl+kSp28fIvn9iKuev8G3Gj7+V7HJWkMcAhweIdi6UhcVJ8kLeniMoX6n6MkrrOAp6k+2T4AfNf2Y12MayTO7Urbkrag+oR8b6/jUpXu/HtAR2+FzWtcVH/3/5D0G0k3STpa0sIdj7BF2VkwYgRI2gA4iuoT72hwGPB9V2moex1LvdcAWwNvBZ4BLlWVOvXS3obFFsAcqmnuZYGrJP3B9n29DWt0k7QycApwgO25Pp33wCeAC20/OAr/7rehupX4AHA6MB74ZS+CyYxA9NKfgdXqfl61lA1Yp0zTLg082uK5vYgLSasCE4D9bXfqU9G8xrUl8B1JM4HPAV+R9KlRENeDwB9tP1KmRi8ENh0FcX0QuMj2bNt/A64BOrVN7Lz87fb6735QkpYCLgAOtT2xQzHNa1xvBz5V/u6/C+wv6chRENeDwNRyW+FFqpTwnfq7b1sGAtFLk4F1JK0haRGqxVrnNdQ5D6itjN4DuMzV6przgL3Lqu81gHWASb2OS9IyVP8z/JLtazoUzzzHZXsb22NtjwV+AHzLdqdWUM/Lv+PFwFskLV4uxO8EbhsFcT0A7AAgaQngbcAdXYxrMBcD75a0rKRlqWacLu51XKX+BOBk22d1KJ55jsv2vrZXL3/3B5f45lrd3+24yrnLSKqto9iBzv3dt69XqxTzlS/bAP8C3EV1P/HQUvZ14L3l9WJUq9zvobrQr1l37qHlvDuBfx4NcQFfpbq3PLXu6/W9jquhjcPo4FMDHfh3/HeqBYy3AN8ZDXFRreI+s8R1G/DFLsf1VqpPjU9TzVDcWnfuh0u89wAfGg1xlX/D2Q1/9+N6HVdDG+Pp4FMDHfh33InqiZnpwInAIp2MrZ2v7CwYERHRx3JrICIioo9lIBAREdHHMhCIiIjoYxkIRERE9LEMBCIiIvpYBgIRERF9LAOBiIiIPpaBQERERB/7/1AfE2fP8BC3AAAAAElFTkSuQmCC\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "#plot = plot_importance(best_classifier, max_num_features=15)\n",
    "features_plot = pd.Series(best_classifier.feature_importances_, index=X_test.columns).nlargest(15).plot(kind='barh')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 877,
   "metadata": {},
   "outputs": [],
   "source": [
    "results = pd.DataFrame(data=y_test.values, index=y_test.index, columns=['actual'])\n",
    "results['probability'] = y_pred_prob_test[:,1]\n",
    "results = results.sort_values('probability', ascending = False)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 878,
   "metadata": {},
   "outputs": [],
   "source": [
    "results['count'] = 1"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 881,
   "metadata": {},
   "outputs": [],
   "source": [
    "results['total'] = results['count'].cumsum()\n",
    "results['will_call'] = results['total'] - results['actual'].cumsum()\n",
    "\n",
    "results = results.drop('count',1) \n",
    "\n",
    "results['percent_will_call'] = 100*results['will_call']/results['total']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 900,
   "metadata": {},
   "outputs": [],
   "source": [
    "#results"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 883,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "<matplotlib.axes._subplots.AxesSubplot at 0x7f86ab952c50>"
      ]
     },
     "execution_count": 883,
     "metadata": {},
     "output_type": "execute_result"
    },
    {
     "data": {
      "image/png": "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\n",
      "text/plain": [
       "<Figure size 432x288 with 1 Axes>"
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "results_top = results.head(88632)\n",
    "\n",
    "start = 500\n",
    "end = 100000 #50500\n",
    "step = 500\n",
    "\n",
    "thresholds = list(range (start, end, step))\n",
    "results_thresholds = results.loc[results['total'].isin(thresholds) == True,]\n",
    "\n",
    "to_plot = results_top\n",
    "\n",
    "to_plot.plot(x ='total', y='percent_will_call', kind = 'scatter')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 901,
   "metadata": {},
   "outputs": [],
   "source": [
    "#ax1 = to_plot.plot.scatter(x='total',y='percent_will_call', c='DarkBlue')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 902,
   "metadata": {},
   "outputs": [],
   "source": [
    "#results.loc[results['total']==results.shape[0],]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "data_test.groupby([response]).count()['PRIMARY_CUST_IND']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "100*data_test.groupby([response]).count()['PRIMARY_CUST_IND'][0]/(data_test.groupby([response]).count()['PRIMARY_CUST_IND'][0]+data_test.groupby([response]).count()['PRIMARY_CUST_IND'][1])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "data.groupby([response]).count()['PRIMARY_CUST_IND']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "creator": "vcherno",
  "kernelspec": {
   "display_name": "Python (env Python3)",
   "language": "python",
   "name": "py-dku-venv-python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.6.5"
  },
  "tags": []
 },
 "nbformat": 4,
 "nbformat_minor": 1
}
